# 9Router environment contract
# This file reflects actual runtime usage in the current codebase.

# Required
JWT_SECRET=change-me-to-a-long-random-secret
INITIAL_PASSWORD=change-me
DATA_DIR=/var/lib/9router

# Recommended runtime variables
PORT=20128
NODE_ENV=production

# Recommended security and ops variables
API_KEY_SECRET=endpoint-proxy-api-key-secret
MACHINE_ID_SALT=endpoint-proxy-salt
ENABLE_REQUEST_LOGS=false
OBSERVABILITY_ENABLED=true
AUTH_COOKIE_SECURE=false
REQUIRE_API_KEY=false

# Cloud sync variables
# Must point to this running instance so internal sync jobs can call /api/sync/cloud.
# Server-side preferred variables:
BASE_URL=http://localhost:20128
CLOUD_URL=https://9router.com
# Optional: secret shared with Cloud Worker for /sync/* (set SYNC_SECRET on worker too)
# CLOUD_SYNC_SECRET=your-sync-secret
# Backward-compatible/public variables:
NEXT_PUBLIC_BASE_URL=http://localhost:20128
NEXT_PUBLIC_CLOUD_URL=https://9router.com

# Optional outbound proxy variables for upstream provider calls
# Lowercase variants are also supported: http_proxy, https_proxy, all_proxy, no_proxy
# HTTP_PROXY=http://127.0.0.1:7890
# HTTPS_PROXY=http://127.0.0.1:7890
# ALL_PROXY=socks5://127.0.0.1:7890
# NO_PROXY=localhost,127.0.0.1

# Currently unused by application runtime (kept as reference)
# INSTANCE_NAME=9router

# --- Cloud Worker (set via wrangler secret put or env in wrangler.toml) ---
# SYNC_SECRET: when set, /sync/:machineId requires header X-Sync-Secret (set CLOUD_SYNC_SECRET in app to match)
# FORWARD_SECRET: when set, /forward and /forward-raw require header X-Forward-Secret
# API_KEY_SECRET: optional; secret for API key CRC verification (must match app if set); unset = legacy default
# ALLOWED_ORIGINS: optional; comma-separated CORS origin (e.g. https://9router.com); default *
